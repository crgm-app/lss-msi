<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reloj Métrico de Precisión v2</title>
    <style>
        :root {
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --text-main: #e0e0e0;
            --highlight: #00d4ff;
            --highlight-sec: #ff0055;
            --border: #333;
        }

        body {
            font-family: 'Courier New', Courier, monospace;
            background-color: var(--bg-color);
            color: var(--text-main);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            margin: 0;
        }

        h1 { font-size: 1.2rem; text-transform: uppercase; border-bottom: 2px solid var(--highlight); padding-bottom: 10px; margin-bottom: 20px;}
        h2 { font-size: 0.9rem; color: #888; margin-bottom: 5px; margin-top: 0;}

        .container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            width: 100%;
            max-width: 800px;
        }

        .card {
            background-color: var(--card-bg);
            border: 1px solid var(--border);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .row {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 5px;
        }

        .data-point {
            display: flex;
            flex-direction: column;
        }

        /* Alineación central para ciertos datos */
        .center-content {
            align-items: center;
            text-align: center;
        }

        .label { font-size: 0.7rem; color: #aaa; margin-bottom: 2px;}
        .value { font-size: 1.3rem; font-weight: bold; color: var(--highlight); line-height: 1.2;}
        .value-sec { font-size: 1rem; color: var(--highlight-sec); font-weight: normal;}
        .sub-value { font-size: 0.9rem; color: #888; }

        /* Tablas */
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.8rem;
            margin-top: 10px;
        }
        th, td {
            border: 1px solid var(--border);
            padding: 8px;
            text-align: left;
        }
        th { background-color: #2c2c2c; }
        
        .big-time { font-size: 2.5rem; text-align: center; color: #fff; margin: 10px 0; letter-spacing: 2px;}
    </style>
</head>
<body>

    <h1>Panel de Control Temporal</h1>

    <div class="container">
        
        <div class="card">
            <h2>1. Hora Actual</h2>
            <div class="big-time" id="currentTime">00:00:00.0</div>
            <div class="row" style="justify-content: center;">
                <div class="data-point center-content">
                    <span class="label">Total Segundos (del día)</span>
                    <span class="value-sec" id="currentTotalSeconds">0.0</span>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>2. Intervalos de 10 Minutos</h2>
            <div class="row">
                <div class="data-point">
                    <span class="label">10-Min Actual (Inicio)</span>
                    <span class="value" id="prevTenMin">00:00</span>
                    <span class="value-sec" id="prevTenSecVal">0.0</span> </div>
                <div class="data-point" style="align-items: flex-end; text-align: right;">
                    <span class="label">10-Min Siguiente</span>
                    <span class="value" id="nextTenMin">00:00</span>
                    <span class="value-sec" id="nextTenSecVal">0.0</span> </div>
            </div>
        </div>

        <div class="card">
            <h2>4 y 5. Tiempo Restante (Cuenta Regresiva)</h2>
            <div class="row">
                <div class="data-point">
                    <span class="label">Para siguiente 10-Min</span>
                    <span class="value" id="remainTenMin">0.0</span>
                </div>
                <div class="data-point" style="align-items: flex-end;">
                    <span class="label">Para siguiente Hora en Punto</span>
                    <span class="value" id="remainHour">0.0</span>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>3. Intervalos de Hora</h2>
            <table>
                <thead>
                    <tr>
                        <th>Estado</th>
                        <th>Hora (HH:MM)</th>
                        <th>En Segundos</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Hora Anterior</td>
                        <td id="prevHourTime">--</td>
                        <td id="prevHourSec">--</td>
                    </tr>
                    <tr style="background-color: #252525;">
                        <td>Hora Actual (Inicio)</td>
                        <td id="currHourTime">--</td>
                        <td id="currHourSec">--</td>
                    </tr>
                    <tr>
                        <td>Hora Siguiente</td>
                        <td id="nextHourTime">--</td>
                        <td id="nextHourSec">--</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="card">
            <h2>6. Vista Detallada (Resumen)</h2>
            <table>
                <tr>
                    <th>Concepto</th>
                    <th>Valor</th>
                </tr>
                <tr>
                    <td>Hora en punto actual</td>
                    <td id="p6_currHour"></td>
                </tr>
                <tr>
                    <td>Hora actual (en segundos)</td>
                    <td id="p6_currHourSec"></td>
                </tr>
                <tr>
                    <td>Hora y 10min actual (HH:MM)</td>
                    <td id="p6_currTenTime"></td>
                </tr>
                <tr>
                    <td>Hora y 10min actual (en seg)</td>
                    <td id="p6_currTenSec"></td>
                </tr>
                <tr>
                    <td>Hora ACTUAL (seg y décima)</td>
                    <td id="p6_actualSec"></td>
                </tr>
                <tr>
                    <td>Hora y 10min siguiente (HH:MM)</td>
                    <td id="p6_nextTenTime"></td>
                </tr>
                <tr>
                    <td>Hora y 10min siguiente (en seg)</td>
                    <td id="p6_nextTenSec"></td>
                </tr>
                <tr>
                    <td>Hora en punto siguiente</td>
                    <td id="p6_nextHourTime"></td>
                </tr>
                <tr>
                    <td>Hora en punto siguiente (segundos)</td>
                    <td id="p6_nextHourSec"></td>
                </tr>
            </table>
        </div>

    </div>

    <script>
        // Formatear ceros a la izquierda
        const pad = (num, size = 2) => num.toString().padStart(size, '0');
        // Formatear milésimas (aunque solo mostraremos 1 decimal visualmente, el cálculo interno sigue siendo preciso)
        const padMs = (num) => num.toString().padStart(3, '0').substring(0, 1); // Solo tomamos el primer dígito para la décima

        // Obtener segundos totales del día
        const getTotalSeconds = (dateObj) => {
            return (dateObj.getHours() * 3600) + 
                   (dateObj.getMinutes() * 60) + 
                   dateObj.getSeconds() + 
                   (dateObj.getMilliseconds() / 1000);
        };

        const formatHM = (d) => `${pad(d.getHours())}:${pad(d.getMinutes())}`;
        const formatHMS = (d) => `${pad(d.getHours())}:${pad(d.getMinutes())}:${pad(d.getSeconds())}`;

        function updateClock() {
            const now = new Date();
            
            // --- CÁLCULOS ---
            const h = now.getHours();
            const m = now.getMinutes();
            const s = now.getSeconds();
            const ms = now.getMilliseconds();
            
            // Definir objetos de fecha clave
            const dCurrHour = new Date(now); dCurrHour.setMinutes(0, 0, 0); // Hora en punto actual
            const dPrevHour = new Date(dCurrHour); dPrevHour.setHours(h - 1); // Hora anterior
            const dNextHour = new Date(dCurrHour); dNextHour.setHours(h + 1); // Hora siguiente

            // Bloques de 10 minutos
            const tenMinBlock = Math.floor(m / 10) * 10;
            const dCurrTen = new Date(now); dCurrTen.setMinutes(tenMinBlock, 0, 0); // 10 min actual
            const dNextTen = new Date(dCurrTen); dNextTen.setMinutes(tenMinBlock + 10); // 10 min siguiente

            // Cálculos en segundos
            const nowTotalSec = getTotalSeconds(now);
            const currTenTotalSec = getTotalSeconds(dCurrTen);
            const nextTenTotalSec = getTotalSeconds(dNextTen);
            const diffTen = (dNextTen - now) / 1000;
            const diffHour = (dNextHour - now) / 1000;

            // --- RENDERIZADO (Con toFixed(1)) ---

            // 1. Hora Actual
            // Tomamos solo la primera décima de segundo para cumplir el requerimiento
            document.getElementById('currentTime').innerText = `${formatHMS(now)}.${Math.floor(ms/100)}`; 
            document.getElementById('currentTotalSeconds').innerText = nowTotalSec.toFixed(1);

            // 2. Intervalos 10 Min (Con valor en segundos agregado)
            document.getElementById('prevTenMin').innerText = formatHM(dCurrTen); 
            document.getElementById('prevTenSecVal').innerText = currTenTotalSec.toFixed(1); // NUEVO

            document.getElementById('nextTenMin').innerText = formatHM(dNextTen);
            document.getElementById('nextTenSecVal').innerText = nextTenTotalSec.toFixed(1); // NUEVO

            // 4 y 5. Restante (Movidio de lugar)
            document.getElementById('remainTenMin').innerText = diffTen.toFixed(1) + " s";
            document.getElementById('remainHour').innerText = diffHour.toFixed(1) + " s";

            // 3. Horas en punto
            document.getElementById('prevHourTime').innerText = formatHM(dPrevHour);
            document.getElementById('prevHourSec').innerText = getTotalSeconds(dPrevHour).toFixed(1);

            document.getElementById('currHourTime').innerText = formatHM(dCurrHour);
            document.getElementById('currHourSec').innerText = getTotalSeconds(dCurrHour).toFixed(1);

            document.getElementById('nextHourTime').innerText = formatHM(dNextHour);
            document.getElementById('nextHourSec').innerText = getTotalSeconds(dNextHour).toFixed(1);

            // 6. Resumen
            document.getElementById('p6_currHour').innerText = formatHM(dCurrHour);
            document.getElementById('p6_currHourSec').innerText = getTotalSeconds(dCurrHour).toFixed(1);
            
            document.getElementById('p6_currTenTime').innerText = formatHM(dCurrTen);
            document.getElementById('p6_currTenSec').innerText = currTenTotalSec.toFixed(1);
            
            document.getElementById('p6_actualSec').innerText = nowTotalSec.toFixed(1);
            
            document.getElementById('p6_nextTenTime').innerText = formatHM(dNextTen);
            document.getElementById('p6_nextTenSec').innerText = nextTenTotalSec.toFixed(1);

            document.getElementById('p6_nextHourTime').innerText = formatHM(dNextHour);
            document.getElementById('p6_nextHourSec').innerText = getTotalSeconds(dNextHour).toFixed(1);
        }

        setInterval(updateClock, 50);
        updateClock();
    </script>
</body>
</html>
