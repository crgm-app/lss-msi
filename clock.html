<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reloj Métrico de Precisión</title>
    <style>
        :root {
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --text-main: #e0e0e0;
            --highlight: #00d4ff;
            --highlight-sec: #ff0055;
            --border: #333;
        }

        body {
            font-family: 'Courier New', Courier, monospace;
            background-color: var(--bg-color);
            color: var(--text-main);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            margin: 0;
        }

        h1 { font-size: 1.2rem; text-transform: uppercase; border-bottom: 2px solid var(--highlight); padding-bottom: 10px; margin-bottom: 20px;}
        h2 { font-size: 0.9rem; color: #888; margin-bottom: 5px; margin-top: 0;}

        .container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            width: 100%;
            max-width: 800px;
        }

        .card {
            background-color: var(--card-bg);
            border: 1px solid var(--border);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .row {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 5px;
        }

        .data-point {
            display: flex;
            flex-direction: column;
        }

        .label { font-size: 0.7rem; color: #aaa; }
        .value { font-size: 1.1rem; font-weight: bold; color: var(--highlight); }
        .value-sec { font-size: 1rem; color: var(--highlight-sec); }

        /* Estilos específicos para la tabla del Punto 6 */
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.8rem;
            margin-top: 10px;
        }
        th, td {
            border: 1px solid var(--border);
            padding: 8px;
            text-align: left;
        }
        th { background-color: #2c2c2c; }
        
        .big-time { font-size: 2rem; text-align: center; color: #fff; margin: 10px 0; }
    </style>
</head>
<body>

    <h1>Panel de Control Temporal</h1>

    <div class="container">
        
        <div class="card">
            <h2>1. Hora Actual</h2>
            <div class="big-time" id="currentTime">00:00:00.000</div>
            <div class="row" style="justify-content: center;">
                <div class="data-point" style="align-items: center;">
                    <span class="label">Total Segundos del día (con milésimas)</span>
                    <span class="value-sec" id="currentTotalSeconds">0.000</span>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>2. Intervalos de 10 Minutos</h2>
            <div class="row">
                <div class="data-point">
                    <span class="label">10-Min Anterior</span>
                    <span class="value" id="prevTenMin">00:00</span>
                </div>
                <div class="data-point">
                    <span class="label">10-Min Siguiente</span>
                    <span class="value" id="nextTenMin">00:00</span>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>3. Intervalos de Hora en Punto (y en segundos)</h2>
            <table>
                <thead>
                    <tr>
                        <th>Estado</th>
                        <th>Hora (HH:MM)</th>
                        <th>Total Segundos</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Hora Anterior</td>
                        <td id="prevHourTime">--</td>
                        <td id="prevHourSec">--</td>
                    </tr>
                    <tr style="background-color: #252525;">
                        <td>Hora Actual (Inicio)</td>
                        <td id="currHourTime">--</td>
                        <td id="currHourSec">--</td>
                    </tr>
                    <tr>
                        <td>Hora Siguiente</td>
                        <td id="nextHourTime">--</td>
                        <td id="nextHourSec">--</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="card">
            <h2>4 y 5. Cuenta Regresiva (Restante)</h2>
            <div class="row">
                <div class="data-point">
                    <span class="label">Para siguiente 10-Min</span>
                    <span class="value" id="remainTenMin">0.000</span>
                </div>
                <div class="data-point">
                    <span class="label">Para siguiente Hora en Punto</span>
                    <span class="value" id="remainHour">0.000</span>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>6. Vista Detallada (Ejemplo Solicitado)</h2>
            <table>
                <tr>
                    <th>Concepto</th>
                    <th>Valor</th>
                </tr>
                <tr>
                    <td>Hora en punto actual</td>
                    <td id="p6_currHour"></td>
                </tr>
                <tr>
                    <td>Hora actual (en segundos)</td>
                    <td id="p6_currHourSec"></td>
                </tr>
                <tr>
                    <td>Hora y 10min actual (Anterior/Actual)</td>
                    <td id="p6_currTenTime"></td>
                </tr>
                <tr>
                    <td>Hora y 10min actual (en seg y mil)</td>
                    <td id="p6_currTenSec"></td>
                </tr>
                <tr>
                    <td>Hora ACTUAL (seg y mil)</td>
                    <td id="p6_actualSec"></td>
                </tr>
                <tr>
                    <td>Hora y 10min siguiente</td>
                    <td id="p6_nextTenTime"></td>
                </tr>
                <tr>
                    <td>Hora y 10min siguiente (seg y mil)</td>
                    <td id="p6_nextTenSec"></td>
                </tr>
                <tr>
                    <td>Hora en punto siguiente</td>
                    <td id="p6_nextHourTime"></td>
                </tr>
                <tr>
                    <td>Hora en punto siguiente (segundos)</td>
                    <td id="p6_nextHourSec"></td>
                </tr>
            </table>
        </div>

    </div>

    <script>
        // Función auxiliar para formatear números con ceros a la izquierda (ej: 09)
        const pad = (num, size = 2) => num.toString().padStart(size, '0');
        const padMs = (num) => num.toString().padStart(3, '0');

        // Función para obtener segundos totales del día desde las 00:00
        const getTotalSeconds = (dateObj) => {
            return (dateObj.getHours() * 3600) + 
                   (dateObj.getMinutes() * 60) + 
                   dateObj.getSeconds() + 
                   (dateObj.getMilliseconds() / 1000);
        };

        // Formateador simple de hora HH:MM
        const formatHM = (d) => `${pad(d.getHours())}:${pad(d.getMinutes())}`;
        // Formateador HH:MM:SS
        const formatHMS = (d) => `${pad(d.getHours())}:${pad(d.getMinutes())}:${pad(d.getSeconds())}`;

        function updateClock() {
            const now = new Date();
            
            // --- CÁLCULOS BÁSICOS ---
            
            // 1. Hora Actual
            const h = now.getHours();
            const m = now.getMinutes();
            const s = now.getSeconds();
            const ms = now.getMilliseconds();
            
            // Objetos fecha auxiliares para cálculos
            
            // Hora en punto actual (ej: 10:00:00)
            const dCurrHour = new Date(now); dCurrHour.setMinutes(0, 0, 0);
            
            // Hora en punto anterior (ej: 09:00:00)
            const dPrevHour = new Date(dCurrHour); dPrevHour.setHours(h - 1);

            // Hora en punto siguiente (ej: 11:00:00)
            const dNextHour = new Date(dCurrHour); dNextHour.setHours(h + 1);

            // Intervalo de 10 minutos
            // Calcular el "suelo" de los 10 minutos (ej: si son 10:24 -> 10:20)
            const tenMinBlock = Math.floor(m / 10) * 10;
            
            const dCurrTen = new Date(now); 
            dCurrTen.setMinutes(tenMinBlock, 0, 0); // 10 min actual/anterior
            
            const dPrevTen = new Date(dCurrTen); 
            dPrevTen.setMinutes(tenMinBlock - 10); // 10 min anterior real

            const dNextTen = new Date(dCurrTen); 
            dNextTen.setMinutes(tenMinBlock + 10); // 10 min siguiente

            // --- ACTUALIZACIÓN DEL DOM ---

            // Punto 1: Hora actual y total segundos
            document.getElementById('currentTime').innerText = `${formatHMS(now)}.${padMs(ms)}`;
            const nowTotalSec = getTotalSeconds(now);
            document.getElementById('currentTotalSeconds').innerText = nowTotalSec.toFixed(3);

            // Punto 2: Minuto 10 anterior y siguiente
            // Nota: Interpretamos "Minuto 10 anterior" como el bloque actual (ej: 20) si estamos en 23.
            // Si quieres estrictamente el anterior al bloque actual, usa dPrevTen. Aquí uso el bloque actual start y next start.
            document.getElementById('prevTenMin').innerText = formatHM(dCurrTen); 
            document.getElementById('nextTenMin').innerText = formatHM(dNextTen);

            // Punto 3: Horas en punto
            document.getElementById('prevHourTime').innerText = formatHM(dPrevHour);
            document.getElementById('prevHourSec').innerText = getTotalSeconds(dPrevHour).toFixed(0);

            document.getElementById('currHourTime').innerText = formatHM(dCurrHour);
            document.getElementById('currHourSec').innerText = getTotalSeconds(dCurrHour).toFixed(0);

            document.getElementById('nextHourTime').innerText = formatHM(dNextHour);
            document.getElementById('nextHourSec').innerText = getTotalSeconds(dNextHour).toFixed(0);

            // Punto 4: Segundos restantes para siguiente decimo minuto
            const diffTen = (dNextTen - now) / 1000;
            document.getElementById('remainTenMin').innerText = diffTen.toFixed(3) + " s";

            // Punto 5: Segundos restantes para siguiente hora
            const diffHour = (dNextHour - now) / 1000;
            document.getElementById('remainHour').innerText = diffHour.toFixed(3) + " s";

            // Punto 6: Ejemplo Resumen
            document.getElementById('p6_currHour').innerText = formatHM(dCurrHour); // Hora en punto actual
            document.getElementById('p6_currHourSec').innerText = getTotalSeconds(dCurrHour).toFixed(0); // Hora actual en segundos
            
            document.getElementById('p6_currTenTime').innerText = formatHM(dCurrTen); // Hora y diez minutos en punto
            document.getElementById('p6_currTenSec').innerText = getTotalSeconds(dCurrTen).toFixed(3); // ... en segundos y milésimas
            
            document.getElementById('p6_actualSec').innerText = nowTotalSec.toFixed(3); // Hora actual en seg y mil
            
            document.getElementById('p6_nextTenTime').innerText = formatHM(dNextTen); // Hora y min decimo siguiente
            document.getElementById('p6_nextTenSec').innerText = getTotalSeconds(dNextTen).toFixed(3); // ... en segundos y mil

            document.getElementById('p6_nextHourTime').innerText = formatHM(dNextHour); // Hora punto siguiente
            document.getElementById('p6_nextHourSec').innerText = getTotalSeconds(dNextHour).toFixed(0); // Hora punto sig en segundos
        }

        // Actualizar cada 50ms para ver las milésimas fluidas
        setInterval(updateClock, 50);
        updateClock(); // Primera llamada inmediata
    </script>
</body>
</html>
